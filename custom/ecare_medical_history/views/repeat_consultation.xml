<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <!-- Explicit tree view -->
        <!--        <record id="repeat_consultation_form_view" model="ir.ui.view">-->
        <!--            <field name="name">repeat.consultation.form.view</field>-->
        <!--            <field name="model">ec.repeat.consultation</field>-->
        <!--            <field name="arch" type="xml">-->
        <!--                <tree>-->

        <!--                </tree>-->
        <!--            </field>-->
        <!--        </record>-->

        <!-- Explicit form view -->
        <record id="repeat_consultation_form_view" model="ir.ui.view">
            <field name="name">repeat.consultation.form.view</field>
            <field name="model">ec.repeat.consultation</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <field name="state" invisible="True" force_save="True"/>

                        <group attrs="{'invisible': [('state', '!=', '1')]}">
                            <field name="question_one_label"/>
                            <field name="question_one_choice"/>
                        </group>

                        <group attrs="{'invisible': ['|', ('question_one_choice', '=', 'no'), ('state', '!=', '1')]}">
                            <field name="lmp"/>
                            <field name="lmp_embryo"/>
                        </group>

                        <group attrs="{'invisible': [('state', '!=', '2')]}">
                            <field name="question_two_label"/>
                            <field name="question_two_choice"/>

                            <button name="action_repeat_consultation_open_obstetrics_history"
                                    attrs="{'invisible': [('question_two_choice', '=', 'no')]}"
                                    type="object"
                                    string="Add Obstetrics History"
                                    class="btn btn-secondary"/>
                        </group>

                        <group attrs="{'invisible': [('state', '!=', '3')]}">
                            <field name="question_three_label"/>
                            <field name="question_three_choice"/>

                            <button name="action_repeat_consultation_open_previous_treatment"
                                    attrs="{'invisible': [('question_three_choice', '=', 'no')]}"
                                    type="object"
                                    string="Add Previous Treatment"
                                    class="btn btn-secondary"/>
                        </group>

                        <group attrs="{'invisible': [('state', '!=', '4')]}">
                            <field name="question_four_label"/>
                        </group>

                        <group attrs="{'invisible': [('state', '!=', '4')]}">
                            <field name="ultrasound_type"/>
                        </group>

                        <group>
                            <button name="move_back"
                                    type="object"
                                    class="btn btn-secondary"
                                    string="Back"/>

                            <button name="move_next"
                                    type="object"
                                    class="btn btn-secondary"
                                    string="Next"/>
                        </group>

                    </sheet>

                </form>
            </field>
        </record>

        <!-- Explicit Action -->
        <record id="repeat_consultation_action" model="ir.actions.act_window">
            <field name="name">Repeat Consultation</field>
            <field name="res_model">ec.repeat.consultation</field>
            <field name="view_mode">tree,form</field>
        </record>

    </data>
</odoo>
