<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <data>

        <!-- Explicit Form View -->
        <record id="repeat_consultation_oi_ti_form_view" model="ir.ui.view">
            <field name="name">ec.repeat.consultation.form</field>
            <field name="model">ec.repeat.consultation</field>
            <field name="arch" type="xml">
                <form edit="false">
                    <sheet class="container">
                        <field name="repeat_new_treatment_pathway"
                               widget="radio"
                                invisible="1"
                               options="{'horizontal': True}"/>

                        <field name="repeat_treatment_advised" invisible="1"/>
                        <field name="repeat_treatment_advised_current"  invisible="1"/>
                        <span attrs="{'invisible': ['|','|',('repeat_new_treatment_pathway', '!=', 'yes'),
											('treatment_state', '=', 'none'),
											('repeat_treatment_advised', '!=', 'pre_oi_ti_checklist')]}">
                            <div class="d-flex flex-column">
                                <div/>

                                <div style="background: #cddbf3; padding: 0.3%;">
                                    <h5 style="display: inline-block;">Pre OI/TI Checklist</h5>
                                    <field style="float: right;pointer-events: none;" name="treatment_state"/>
                                </div>
                            </div>
                            <group string="Female Pre OI/TI Checklist">
                                <field name="upt_result"
                                       widget="radio"
                                       options="{'horizontal': True}"/>
                                <span class="o_form_label" attrs="{'invisible': [('upt_result', '!=', 'not_done')]}"/>
                                <span style="display: flex;width: 40rem;margin: 1rem;" class="alert alert-warning" id="husband_not_present" attrs="{'invisible': [('upt_result', '!=', 'not_done')]}">
                                    Please return to this form once UPT has been performed.
                                </span>
                                <span class="o_form_label" attrs="{'invisible': [('upt_result', '!=', 'positive')]}"/>
                                <span style="display: flex;width: 40rem;margin: 1rem;" class="alert alert-warning" id="husband_not_present" attrs="{'invisible': [('upt_result', '!=', 'positive')]}">
                                    Please create a new repeat consultation and fill in a new pregnancy assessment form.
                                </span>
                                <field name="iui_plan"
                                       widget="radio"
                                       options="{'horizontal': True}"/>
                                <field name="primary_indication" attrs="{'required': [('treatment_state', '!=', 'none'),('iui_plan', '=', 'yes')],'invisible': [('iui_plan', '!=', 'yes')]}"/>
                                <span class="o_form_label" attrs="{'invisible': ['|',('iui_plan', '!=', 'yes'),('primary_indication', '!=', 'husband_not_present')]}"/>
                                <span style="display: flex;width: 40rem;margin: 1rem;" class="alert alert-warning" id="husband_not_present" attrs="{'invisible': ['|',('iui_plan', '=', 'no'),('primary_indication', '!=', 'husband_not_present')]}">
                                    The andrology department needs to confirm the presence of a suitable sample for Frozen-Thawed IUI.
                                    The request for approval will be sent upon saving this form.
                                </span>
                            </group>
                            <group string="Hormonal Profile">
                                <span/>
                                <label for="fsh_lh_amh_acceptable"/>
                                <span/>
                                <field name="fsh_lh_amh_acceptable" nolabel="1" widget="radio" options="{'horizontal': True}"/>
                                <field name="fsh_lh_amh_acceptable_decision" attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('fsh_lh_amh_acceptable', '!=', 'no')]}" string="Decision"/>

                                <span/>
                                <label for="menopause_sign_suspicion"/>
                                <span/>
                                <field name="menopause_sign_suspicion" widget="radio" nolabel="1" options="{'horizontal': True}"/>
                                <field name="menopause_sign_suspicion_decision" attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('menopause_sign_suspicion', '!=', 'yes')]}" string="Decision"/>
                                <field name="female_ot_ti_weight"/>
                                <field name="female_ot_ti_height"/>
                                <field name="female_ot_ti_bmi" widget="condition_color_widget" style="pointer-events: none;"/>
                                <field name="female_ot_ti_bmi_decision" force_save="1" attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('female_ot_ti_bmi', '&lt;', 35)]}" string="Decision"/>
                                <!--													<field name="tubal_patency_test"-->
                                <!--														   widget="radio"-->
                                <!--														   options="{'horizontal': True}"/>-->
                                <span/>
                                <label for="tubal_patency_test"/>
                                <span/>
                                <field name="tubal_patency_test" nolabel="1" widget="radio" options="{'horizontal': True}"/>
                                <!--													<field name="tubal_patency_test_decision"-->
                                <!--														   attrs="{'invisible': [('tubal_patency_test', '!=', 'yes')],-->
                                <!--														   'required': [('treatment_state', '!=', 'none'),('tubal_patency_test', '=', 'yes')]}"-->
                                <!--														   string="Decision"/>-->
                                <span/>
                                <label for="tubal_patency_test_dropdown" attrs="{'invisible': [('tubal_patency_test', '!=', 'yes')]}"/>
                                <span/>
                                <field name="tubal_patency_test_dropdown" nolabel="1" attrs="{'required': [('treatment_state', '!=', 'none'),('tubal_patency_test', '=', 'yes')],'invisible': [('tubal_patency_test', '!=', 'yes')]}"/>
                                <field name="tubal_patency_test_dropdown_decision" attrs="{'invisible': ['|','|',('tubal_patency_test', '!=', 'yes'),('tubal_patency_test_dropdown', 'not in', ['not_tested', 'both_blocked', 'restricted_spill']),('treatment_state', '!=', 'approval')]}" string="Decision"/>
                                <span/>
                                <label for="cervical_incompetence_diagnosis"/>
                                <span/>
                                <field name="cervical_incompetence_diagnosis" widget="radio" nolabel="1" options="{'horizontal': True}"/>
                                <field name="cervical_incompetence_diagnosis_decision" attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('cervical_incompetence_diagnosis', '!=', 'yes')]}" string="Decision"/>

                                <!--												<field name="results_await_label" string="Results-Awaits" attrs="{'invisible': [('fsh_lh_amh_acceptable', '!=', 'awaiting_results')]}"/>-->
                                <span/>
                                <label for="uterine_tubal_anomalies"/>
                                <span/>
                                <field name="uterine_tubal_anomalies" nolabel="1"/>
                                <field name="uterine_tubal_anomalies_decision" attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('uterine_tubal_anomalies', '!=', 'no_testing')]}" string="Decision"/>

                            </group>
                            <group string="Male Pre OI/TI Checklist">
                                <span/>
                                <label for="male_semen_analysis"/>
                                <span/>
                                <field name="male_semen_analysis"
                                       widget="radio"
                                       nolabel="1"
                                       options="{'horizontal': True}"/>
                                <field name="male_semen_analysis_decision"
                                       attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('male_semen_analysis', '!=', 'no')]}"
                                       string="Decision"/>
                                <span/>
                                <label for="husband_availability_male"/>
                                <span/>
                                <field name="husband_availability_male"
                                       widget="radio"
                                       nolabel="1"
                                       options="{'horizontal': True}"/>
                                <span/>
                                <label for="frozen_sample_available_male" attrs="{'invisible': [('husband_availability_male', '!=', 'no')]}"/>
                                <span/>
                                <field name="frozen_sample_available_male"
                                       attrs="{'invisible': [('husband_availability_male', '!=', 'no')]}"
                                       nolabel="1"/>
                                <span/>
                                <label for="risk_inability_to_give_samples_male"/>
                                <span/>
                                <field name="risk_inability_to_give_samples_male"
                                       widget="radio"
                                       nolabel="1"
                                       options="{'horizontal': True}"/>
                                <field name="risk_inability_male_decision"
                                       attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('risk_inability_to_give_samples_male', '!=', 'yes')]}" string="Decision"/>

                            </group>
                            <group string="Consents and risk assessment">
                                <span/>
                                <label for="counselling_multiple_birth"/>
                                <span/>
                                <field name="counselling_multiple_birth"
                                       widget="radio"
                                       nolabel="1"
                                       options="{'horizontal': True}"/>
                                <field name="counselling_multiple_birth_decision"
                                       attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('counselling_multiple_birth', '!=', 'no')]}"
                                       string="Decision"/>

                                <span/>
                                <label for="counselling_failure_treatment"/>
                                <span/>
                                <field name="counselling_failure_treatment"
                                       widget="radio"
                                       nolabel="1"
                                       options="{'horizontal': True}"/>
                                <field name="counselling_failure_treatment_decision"
                                       attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('counselling_failure_treatment', '!=', 'no')]}"
                                       string="Decision"/>
                                <span/>
                                <label for="counselling_lower_success_rate"/>
                                <span/>
                                <field name="counselling_lower_success_rate"
                                       widget="radio"
                                       nolabel="1"
                                       options="{'horizontal': True}"/>
                                <field name="counselling_lower_success_rate_decision"
                                       attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('counselling_lower_success_rate', '!=', 'no')]}"
                                       string="Decision"/>
                                <span/>
                                <label for="counselling_high_bmi"/>
                                <span/>
                                <field name="counselling_high_bmi"
                                       widget="radio"
                                       nolabel="1"
                                       options="{'horizontal': True}"/>
                                <field name="counselling_high_bmi_decision"
                                       attrs="{'invisible': ['|', ('treatment_state', '!=', 'approval'),('counselling_high_bmi', '!=', 'no')]}"
                                       string="Decision"/>
                            </group>
                            <div class="d-flex flex-column" attrs="{'invisible':[('treatment_state', '!=', 'approval')]}">
                                <div/>

                                <div style="background: #cddbf3; padding: 0.3%;">
                                    <h5>Decisions</h5>
                                </div>
                            </div>
                            <group class="m-3" attrs="{'invisible':[('treatment_state', 'not in', ['approval','treatment_started'])]}">
                                <span/>
                                <field style="width: 55rem;" class="alert alert-warning" name="oi_ti_treatment_prompt_message" nolabel="1"/>
                                <!--													<field name="oi_ti_decisions" attrs="{'required':[('treatment_state', '=', 'approval')]}"/>-->
                                <field name="oi_ti_additional_comments"/>
                                <field name="oi_ti_approved_signed_by"/>
<!--                                <label for="action_proceed_to_ui_ti"/>-->
<!--                                <div id="action_proceed_buttons">-->
<!--                                    <button name="action_proceed_to_ui_ti"-->
<!--                                            type="object"-->
<!--                                            onclick="scrollToElement('io_ti_platform_section_link')"-->
<!--                                            context="{'proceed_to_ui_ti': 'True'}"-->
<!--                                            class="btn btn-success m-3"-->
<!--                                            attrs="{'invisible': [('show_repeat_section_state', '=', False)]}"-->
<!--                                            string="Proceed to OI/TI"/>-->
<!--                                    <button name="action_not_proceed_to_ui_ti"-->
<!--                                            type="object"-->
<!--                                            class="btn btn-danger m-3"-->
<!--                                            attrs="{'invisible': [('show_repeat_section_state', '=', False)]}"-->
<!--                                            string="Do Not Proceed"/>-->
<!--                                </div>-->
                            </group>

<!--                            <div class="m-3">-->
<!--                                <button name="action_proceed_to_ui_ti"-->
<!--                                        type="object"-->
<!--                                        class="btn btn-primary"-->
<!--                                        attrs="{'invisible': [('treatment_state', 'in', ['approval', 'treatment_started'])]}"-->
<!--                                        string="Proceed"/>-->
<!--                            </div>-->
                        </span>

                    </sheet>
                    <footer/>
                </form>
            </field>
        </record>

        <!-- Explicit Kanban View -->

        <record id="view_ec_repeat_consultation_kanban" model="ir.ui.view">
            <field name="name">ec.repeat.consultation.kanban</field>
            <field name="model">ec.repeat.consultation</field>
            <field name="arch" type="xml">
                <kanban create="0" class="oe_background_grey max_width_kanban">
                    <!--                    <field name="tvs_cyst_size_ids"/>-->
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card  w-100 repeat_kanban repeat_kanban_section_header">
                                <t t-set="rec_id" t-value="record.id.raw_value"/>
                                <div style="text-align: right;">
                                    <div style="text-align: -webkit-right;display: inline-block;" attrs="{'invisible': ['|',('repeat_consultation_state','!=','open'),('treatment_state','=','none')]}">
                                        <span class="bg-success" style="display: grid;
                                    height: 50%; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); color: #fff;
                                    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2); text-transform: uppercase;
                                    padding: 4px; border-radius: 1rem; font-size: 1rem;
                                    text-align: center; overflow: hidden; user-select: none;">
                                            <field name="treatment_state"/>
                                        </span>
                                    </div>
                                    <div style="text-align: -webkit-right;display: inline-block;" attrs="{'invisible': [('treatment_state','=','none')]}">
                                        <span class="bg-success" style="display: grid;
                                    height: 50%; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); color: #fff;
                                    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2); text-transform: uppercase;
                                    padding: 4px; border-radius: 1rem; font-size: 1rem;
                                    text-align: center; overflow: hidden; user-select: none;">
                                            <field name="repeat_treatment_advised"/>
                                        </span>
                                    </div>
                                    <div style="text-align: -webkit-right;display: inline-block;" attrs="{'invisible': [('repeat_consultation_state','!=','open'),
                                ('repeat_consultation_state','!=','open')]}">
                                        <span class="bg-success" style="display: grid;margin: 0.7rem;
                                    height: 50%; box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1); color: #fff;
                                    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2); text-transform: uppercase;
                                    padding: 4px; border-radius: 1rem; font-size: 1rem;
                                    text-align: center; overflow: hidden; user-select: none;">
                                            <field name="repeat_consultation_state"/>
                                        </span>
                                    </div>
                                </div>
                                <div>
                                    <div class="d-flex" style="justify-content: space-between">
                                        <div>
                                            Consultation Date
                                            <b>- </b>
                                            <field name="repeat_date"/>
                                        </div>
                                        <div class="text-center font-weight-bold d-flex align-items-end">
                                            <!--                                            <t t-esc="record.repeat_timeline_id.show_repeat_section_state"/>-->
                                            <!--                                            <span t-if="record.repeat_timeline_id.show_repeat_section_state.raw_value == True" class="bg-warning" style="display: grid; border-radius: 12px; text-align: center;">In progress</span>-->
                                            <div>

                                                <a name="action_set_working_consultation"
                                                   type="object"
                                                   string="Edit"
                                                   class="repeat_kanban_button"
                                                   onclick="scrollToElement('repeat_consultation_section_link')">
                                                    <i class="fa fa-edit fa-2x" aria-hidden="true"/>
                                                </a>

                                            </div>

                                            <div>
                                                <a data-bs-toggle="collapse"
                                                   onclick="toggle_element_icon_class(this, 'fa-angle-down', 'fa-angle-up')"
                                                   t-att-data-bs-target="'#family_history_section_' + rec_id" href="#">
                                                    <i class="fa fa-angle-down fa-2x" aria-hidden="true"/>
                                                </a>
                                            </div>

                                        </div>
                                    </div>


                                </div>
                                <div class="card-block mb-5 pl-4 collapse repeat_kanban_section_content"
                                     t-att-id="'family_history_section_' + rec_id">
                                    <hr class="custom_line"/>
                                    <section>

                                        <div class="row">
                                            <div class="col-12 family-history">
                                                <div class="bd-example" data-example-id="">
                                                    <div id="accordion" role="tablist" aria-multiselectable="true">
                                                        <div class="o_group row align-items-start">

                                                            <div class="o_inner_group grid col-lg-6 text-900">
                                                                <div class="d-flex d-sm-contents flex-column">
                                                                    <div>
                                                                        <span class="o_form_label">Consultation Date
                                                                        </span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_date"/>
                                                                    </div>
                                                                </div>

                                                                <div class="d-flex d-sm-contents flex-column">
                                                                    <div>
                                                                        <span class="o_form_label">Interaction</span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_consultation_interaction"/>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex d-sm-contents flex-column">
                                                                    <div>
                                                                        <span class="o_form_label">Status</span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_status"/>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex d-sm-contents flex-column">
                                                                    <div>
                                                                        <span class="o_form_label">Consultation with
                                                                        </span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_consultation_with"/>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex d-sm-contents flex-column" t-if="record.repeat_seen_with_other.raw_value">
                                                                    <div>
                                                                        <span class="o_form_label">Others Present</span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_seen_with_other"/>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex d-sm-contents flex-column">
                                                                    <div>
                                                                        <span class="o_form_label">Seen by</span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_seen_by"/>
                                                                    </div>
                                                                </div>
                                                                <div class="d-flex d-sm-contents flex-column">
                                                                    <div>
                                                                        <span class="o_form_label">Others Present
                                                                        </span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_other_doctors_present"/>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="o_inner_group grid col-lg-6 text-900">
                                                                <div class="d-flex d-sm-contents flex-column">
                                                                    <div>
                                                                        <span class="o_form_label">Location</span>
                                                                    </div>
                                                                    <div>
                                                                        <field name="repeat_location_id"/>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>


                                                        <div class="oe_kanban_title" t-if="record.question_one_choice.raw_value">
                                                            <field name="question_one_label"/>
                                                            <h5 style="display: inline-block;margin-left: 5%;">
                                                                <field name="question_one_choice"/>
                                                            </h5>
                                                        </div>

                                                        <span t-if="record.question_one_choice.raw_value == 'yes'">

                                                            <div class="o_group row align-items-start">
                                                                <div class="o_inner_group grid col-lg-12 text-900">
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_lmp.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">LMP</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_lmp"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_gestational_age.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Gestational Age
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_gestational_age"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_conception.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Conception</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_conception"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_embryos_replaced.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">In case of IVF/ICSI; number of embryos replaced:</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_embryos_replaced"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex flex-column text-900">
                                                                        <div class="d-inline-block">
                                                                            <h5>PREGNANCY STATUS:</h5>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex flex-column text-900"/>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_gestation_type.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Type of
                                                                                Gestation
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_gestation_type"/>
                                                                        </div>
                                                                        <div t-if="record.repeat_pregnancy_other_info.raw_value and record.repeat_pregnancy_gestation_type.raw_value == 'other'">
                                                                            <span class="o_form_label">Other</span>
                                                                        </div>
                                                                        <div t-if="record.repeat_pregnancy_other_info.raw_value and record.repeat_pregnancy_gestation_type.raw_value == 'other'">
                                                                            <field name="repeat_pregnancy_other_info"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_viability_potential.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Viability Potential
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_viability_potential"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_details.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Details</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_details"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_diagnosis.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Any significant pregnancy diagnosis?</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_diagnosis"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex flex-column text-900">
                                                                        <div class="d-inline-block">
                                                                            <h5>REASON FOR VISIT</h5>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex flex-column text-900"/>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_reason_to_visit.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Reason to visit
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_reason_to_visit"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_notes.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Notes</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_notes" widget="html"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_scanned.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Documented Medicsi Scan Reviewed</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_scanned"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_significant_findings.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Mention any SIGNIFICANT findings</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_significant_findings"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex flex-column text-900">
                                                                        <div class="d-inline-block">
                                                                            <h5>Examination:</h5>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex flex-column text-900"/>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_hr.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">HR</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_hr"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_rhythm.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Rhythm</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_rhythm"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_bp_upper.raw_value">

                                                                        <div>
                                                                            <span class="o_form_label">BP</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_bp_upper"/>
                                                                            <span>/</span>
                                                                            <field name="repeat_pregnancy_bp_lower"/>
                                                                            <span style="margin-left:1%;">mmHg</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_temp.raw_value">

                                                                        <div>
                                                                            <span class="o_form_label">Temp</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_temp"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_rr.raw_value">

                                                                        <div>
                                                                            <span class="o_form_label">RR</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_rr"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_fetal_heart.raw_value">

                                                                        <div>
                                                                            <span class="o_form_label">Fetal
                                                                                heart:
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_fetal_heart"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_signs_of_ohss.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Any signs of
                                                                                OHSS?
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_signs_of_ohss"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_icsi_ultrasound.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">ICSI Ultrasound
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_icsi_ultrasound"/>
                                                                        </div>
                                                                    </div>


                                                                    <div class="d-flex flex-column text-900">
                                                                        <div class="d-inline-block">
                                                                            <h5>Diagnosis</h5>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex flex-column text-900"/>


                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_diagnosis_ids.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Diagnosis</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_diagnosis_ids" widget="many2many_tags"/>
                                                                        </div>
                                                                        <div t-if="record.repeat_pregnancy_diagnosis_id_text.raw_value">
                                                                            <span class="o_form_label">Other Diagnosis</span>
                                                                        </div>
                                                                        <div t-if="record.repeat_pregnancy_diagnosis_id_text.raw_value">
                                                                            <field name="repeat_pregnancy_diagnosis_id_text"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_diagnosis.raw_value">
                                                                    </div>


                                                                    <div class="d-flex flex-column text-900">
                                                                        <div class="d-inline-block">
                                                                            <h5>Investigations</h5>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex flex-column text-900"/>


                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_investigation_ids.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Investigations</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_investigation_ids" widget="many2many_tags"/>
                                                                        </div>
                                                                        <div>
                                                                            <span class="o_form_label">Investigation Notes</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_investigation_id_text"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex flex-column text-900">
                                                                        <div class="d-inline-block">
                                                                            <h5>Procedures</h5>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex flex-column text-900"/>


                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_procedure_performed.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Procedure</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_procedure_performed"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_procedure_performed_text.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Procedure Notes</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_procedure_performed_text"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible':[('repeat_pregnancy_reason_to_visit', '!=', 'genetic_testing')]}"
                                                                         t-if="record.repeat_pregnancy_doctors.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Doctors</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_doctors" widget="many2many_tags"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible':[('repeat_pregnancy_reason_to_visit', '!=', 'genetic_testing')]}"
                                                                         t-if="record.repeat_pregnancy_assistants.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Assistants</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_assistants" widget="many2many_tags"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_type_sample_obtained.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Type of Sample Obtained</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_type_sample_obtained"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_name_receiving_geneticist.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Name of Receiving Geneticist</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_name_receiving_geneticist"/>
                                                                        </div>
                                                                    </div>

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_pregnancy_plan.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Plan</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pregnancy_plan"/>
                                                                        </div>
                                                                    </div>


                                                                </div>
                                                            </div>

                                                        </span>

                                                        <span t-if="record.question_one_choice.raw_value == 'no'">
                                                            <div class="oe_kanban_title">
                                                                <field name="question_two_label"/>
                                                                <h5 style="display: inline-block;margin-left: 5%;">
                                                                    <field name="question_two_choice"/>
                                                                </h5>
                                                            </div>


                                                            <div class="oe_kanban_title d-inline-block col-9">
                                                                <field name="question_three_label"/>
                                                                <h5 style="display: inline-block;margin-left: 5%;">
                                                                    <field name="question_three_choice"/>
                                                                </h5>
                                                            </div>
                                                            <!--                                                            <span  t-if="record.question_three_choice.raw_value == 'yes'">-->
                                                            <!--                                                                <button name="action_repeat_consultation_open_previous_treatment"-->
                                                            <!--                                                                        type="object"-->
                                                            <!--                                                                        class="btn btn-primary"-->
                                                            <!--                                                                        string="Previous treatment"/>-->
                                                            <!--                                                            </span>-->

                                                            <div class="o_group row align-items-start">
                                                                <div class="o_inner_group grid col-lg-12 text-900">
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.lmp_question_four.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">LMP
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="lmp_question_four"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_cycle_day.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Cycle Day
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_cycle_day"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.is_couple_living_together.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Is the couple
                                                                                living together?
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="is_couple_living_together"/>
                                                                        </div>
                                                                    </div>
                                                                    <!--                                                                    <div class="d-flex d-sm-contents flex-column"-->
                                                                    <!--                                                                         t-if="record.is_couple_living_together.raw_value">-->
                                                                    <!--                                                                        <div>-->
                                                                    <!--                                                                            <span class="o_form_label">Is the couple-->
                                                                    <!--                                                                                living together?-->
                                                                    <!--                                                                            </span>-->
                                                                    <!--                                                                        </div>-->
                                                                    <!--                                                                        <div>-->
                                                                    <!--                                                                            <field name="is_couple_living_together"/>-->
                                                                    <!--                                                                        </div>-->
                                                                    <!--                                                                    </div>-->
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.is_couple_using_contraception.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Is the couple
                                                                                using contraception?
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="is_couple_using_contraception"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_note.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Reason for
                                                                                visit
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_note"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_examination_required.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Examination
                                                                                Required
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_examination_required"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_gpe.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">GPE</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_gpe"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_thyroid.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Thyroid</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_thyroid"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_abdominal.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Abdominal</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_abdominal"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_breast.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Breast</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_breast"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_pelvic_examination_state.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Pelvic
                                                                                Examination Done?
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_pelvic_examination_state"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class=" text-900" attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}">
                                                                <div class="d-inline-block" attrs="{'invisible': [('inspection_only', '!=', True)]}">
                                                                    <field name="inspection_only"/>
                                                                </div>
                                                                <div class="d-inline-block" attrs="{'invisible': [('inspection_only', '!=', True)]}">
                                                                    <span>Inspection Only</span>
                                                                </div>

                                                                <div class="d-inline-block ms-2" attrs="{'invisible': [('p_s_only', '!=', True)]}">
                                                                    <field name="p_s_only"/>
                                                                </div>
                                                                <div class="d-inline-block" attrs="{'invisible': [('p_s_only', '!=', True)]}">
                                                                    <span>P/S Only</span>
                                                                </div>

                                                                <div class="d-inline-block ms-2" attrs="{'invisible': [('p_v_only', '!=', True)]}">
                                                                    <field name="p_v_only"/>
                                                                </div>
                                                                <div class="d-inline-block" attrs="{'invisible': [('p_v_only', '!=', True)]}">
                                                                    <span>P/V Only</span>
                                                                </div>
                                                            </div>

                                                            <div class="o_group row align-items-start" attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}">
                                                                <div class="o_inner_group grid col-lg-12 text-900 mt-1">
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_findings_on_inspection.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Findings on
                                                                                Inspection
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_findings_on_inspection"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_valva_vaginal_exam.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Vulva/Vaginal
                                                                                Exam
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_valva_vaginal_exam"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_cervix.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Cervix</span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_cervix"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_uterus_and_adnexae.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Uterus and
                                                                                Adnexae
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_uterus_and_adnexae"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="d-flex flex-column text-900" attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}">
                                                                <div class="d-inline-block">
                                                                    <h5>Swab Taken</h5>
                                                                </div>
                                                                <div class="d-flex">
                                                                    <div class="d-inline-block" attrs="{'invisible': [('repeat_hvs', '!=', True)]}">
                                                                        <field name="repeat_hvs"/>
                                                                    </div>
                                                                    <div class="d-inline-block" attrs="{'invisible': [('repeat_hvs', '!=', True)]}">
                                                                        <span>HVS</span>
                                                                    </div>
                                                                    <div class="d-inline-block ms-2" attrs="{'invisible': [('repeat_endocervical', '!=', True)]}">
                                                                        <field name="repeat_endocervical"/>
                                                                    </div>
                                                                    <div class="d-inline-block" attrs="{'invisible': [('repeat_endocervical', '!=', True)]}">
                                                                        <span>Endocervical</span>
                                                                    </div>
                                                                    <div class="d-inline-block ms-2" attrs="{'invisible': [('repeat_no_swab_taken', '!=', True)]}">
                                                                        <field name="repeat_no_swab_taken"/>
                                                                    </div>
                                                                    <div class="d-inline-block" attrs="{'invisible': [('repeat_no_swab_taken', '!=', True)]}">
                                                                        <span>No Swab Taken</span>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="o_group row align-items-start" attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}">
                                                                <div class="o_inner_group grid col-lg-12 text-900 mt-1">

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_method_of_hvs.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Method of HVS
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_method_of_hvs"/>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="text-900" attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}">

                                                                <div class="d-inline-block" attrs="{'invisible': [('repeat_pap_smear_done', '!=', True)]}">
                                                                    <field name="repeat_pap_smear_done"/>
                                                                </div>
                                                                <div class="d-inline-block" attrs="{'invisible': [('repeat_pap_smear_done', '!=', True)]}">
                                                                    <span>Pap Smear Done</span>
                                                                </div>
                                                                <div class="d-inline-block ms-2" attrs="{'invisible': [('repeat_pipelle_sampling_done', '!=', True)]}">
                                                                    <field name="repeat_pipelle_sampling_done"/>
                                                                </div>
                                                                <div class="d-inline-block" attrs="{'invisible': [('repeat_pipelle_sampling_done', '!=', True)]}">
                                                                    <span>Pipelle Sampling Done</span>
                                                                </div>
                                                            </div>


                                                            <div class="o_group row align-items-start">
                                                                <div class="o_inner_group grid col-lg-12 text-900 mt-1">

                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('repeat_examination_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_other_findings.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Other Findings
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_other_findings"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.scan_required.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Scan Required
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="scan_required"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('scan_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_ultrasound_type.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Ultrasound Type
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_ultrasound_type"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('scan_required', '!=', 'yes')]}"
                                                                         t-if="record.lmp_question_four.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">LMP
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="lmp_question_four"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('scan_required', '!=', 'yes')]}"
                                                                         t-if="record.repeat_cycle_day.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Cycle Day
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_cycle_day"/>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <span attrs="{'invisible': [('scan_required', '!=', 'yes')]}">
                                                                <div class="text-900">
                                                                    <h5>Uterus</h5>
                                                                </div>
                                                                <!--                                                                <div class="o_group row align-items-start">-->
                                                                <!--                                                                    <div class="o_inner_group grid col-lg-12 text-900">-->
                                                                <!--                                                                        <div class="d-flex d-sm-contents flex-column">-->
                                                                <!--                                                                            <div>-->
                                                                <!--                                                                                <span class="o_form_label">Fibroid</span>-->
                                                                <!--                                                                            </div>-->
                                                                <!--                                                                            <div>-->
                                                                <!--                                                                                <field name="repeat_uterus_fibroid_computed"/>-->
                                                                <!--                                                                            </div>-->
                                                                <!--                                                                        </div>-->
                                                                <!--                                                                    </div>-->
                                                                <!--                                                                </div>-->
                                                                <div class="text-900">

                                                                    <div class="d-inline-block" attrs="{'invisible': [('tvs_uterus_tvs_size', '!=', True)]}">
                                                                        <field name="tvs_uterus_tvs_size"/>
                                                                    </div>
                                                                    <div class="d-inline-block" attrs="{'invisible': [('tvs_uterus_tvs_size', '!=', True)]}">
                                                                        <span>Size</span>
                                                                    </div>
                                                                    <div class="d-inline-block ms-2" attrs="{'invisible': [('tvs_uterus_tvs_position', '!=', True)]}">
                                                                        <field name="tvs_uterus_tvs_position"/>
                                                                    </div>
                                                                    <div class="d-inline-block" attrs="{'invisible': [('tvs_uterus_tvs_position', '!=', True)]}">
                                                                        <span>Position</span>
                                                                    </div>
                                                                    <div class="d-inline-block ms-2" attrs="{'invisible': [('tvs_uterus_tvs_fiobrid', '!=', True)]}">
                                                                        <field name="tvs_uterus_tvs_fiobrid"/>
                                                                    </div>
                                                                    <div class="d-inline-block" attrs="{'invisible': [('tvs_uterus_tvs_fiobrid', '!=', True)]}">
                                                                        <span>Fiobrid</span>
                                                                    </div>
                                                                </div>

                                                                <div class="o_group row align-items-start" t-if="record.tvs_uterus_flexion.raw_value">
                                                                    <div class="o_inner_group grid col-lg-12 text-900">
                                                                        <div class="d-flex d-sm-contents flex-column">
                                                                            <div>
                                                                                <span class="o_form_label">Uterus Flexion</span>
                                                                            </div>
                                                                            <div>
                                                                                <field name="tvs_uterus_flexion"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="o_group row align-items-start">
                                                                    <div class="o_inner_group grid col-lg-12 text-900">
                                                                        <div class="d-flex d-sm-contents flex-column" t-if="record.position_to_left.raw_value or record.position_to_right.raw_value or record.position_mid_position.raw_value">
                                                                            <div>
                                                                                <span class="o_form_label">Position</span>
                                                                            </div>
                                                                            <div class="d-flex">
                                                                                <field name="position_to_left" attrs="{'invisible': [('position_to_left', '!=', True)]}"/>
                                                                                <span for="position_to_left" attrs="{'invisible': [('position_to_left', '!=', True)]}" style=" margin-right: 1%;width:9rem;">Deviated to Left</span>
                                                                                <field name="position_to_right" attrs="{'invisible': [('position_to_right', '!=', True)]}"/>
                                                                                <span for="position_to_right" attrs="{'invisible': [('position_to_right', '!=', True)]}" style=" margin-right: 1%;     width:9rem;">Deviated to Right</span>
                                                                                <field name="position_mid_position" attrs="{'invisible': [('position_mid_position', '!=', True)]}"/>
                                                                                <span for="position_mid_position" attrs="{'invisible': [('position_mid_position', '!=', True)]}" style=" margin-right: 1%;    width:9rem; ">Mid-Position</span>
                                                                            </div>
                                                                            <!--                                                                            <div>-->
                                                                            <!--                                                                                -->
                                                                            <!--&lt;!&ndash;                                                                                <field name="tvs_uterus_position_ids"/>&ndash;&gt;-->
                                                                            <!--                                                                            </div>-->
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="o_group row align-items-start" t-if="record.tvs_uterus_tvs_size.raw_value">
                                                                    <div class="o_inner_group grid col-lg-12 text-900">
                                                                        <div class="d-flex d-sm-contents flex-column"  t-if="record.tvs_uterus_size_x.raw_value or record.tvs_uterus_size_y.raw_value">
                                                                            <div>
                                                                                <span class="o_form_label">Size</span>
                                                                            </div>
                                                                            <div class="d-flex">
                                                                                <field name="tvs_uterus_size_x"/>
                                                                                <span>x</span>
                                                                                <field name="tvs_uterus_size_y"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="o_group row align-items-start" t-if="record.repeat_uterus_fibroid_computed.raw_value">
                                                                    <div class="o_inner_group grid col-lg-12 text-900">
                                                                        <div class="d-flex d-sm-contents flex-column">
                                                                            <div>
                                                                                <span class="o_form_label">Fibroid (cm)</span>
                                                                            </div>
                                                                            <div>
                                                                                <field name="repeat_uterus_fibroid_computed"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="o_group row align-items-start">
                                                                    <div class="o_inner_group grid col-lg-12 text-900">
                                                                        <div class="d-flex d-sm-contents flex-column" t-if="record.tvs_smooth.raw_value or record.tvs_distorted.raw_value or record.tvs_triple_echo.raw_value or record.tvs_hyperechoic_solid.raw_value or record.tvs_suspected_cavity_lesion.raw_value or record.tvs_menstruating.raw_value">
                                                                            <div>
                                                                                <span class="o_form_label">Endometrial Character</span>
                                                                            </div>
                                                                            <div style="width: 50rem;">
                                                                                <field name="tvs_smooth" attrs="{'invisible': [('tvs_smooth', '!=', True)]}"/>
                                                                                <span for="tvs_smooth" attrs="{'invisible': [('tvs_smooth', '!=', True)]}" style=" margin-right: 1%; ">Smooth</span>
                                                                                <field name="tvs_distorted" attrs="{'invisible': [('tvs_distorted', '!=', True)]}"/>
                                                                                <span for="tvs_distorted" attrs="{'invisible': [('tvs_distorted', '!=', True)]}" style=" margin-right: 1%; ">Distorted</span>
                                                                                <field name="tvs_triple_echo" attrs="{'invisible': [('tvs_triple_echo', '!=', True)]}"/>
                                                                                <span for="tvs_triple_echo" attrs="{'invisible': [('tvs_triple_echo', '!=', True)]}" style=" margin-right: 1%; ">Triple Echo</span>
                                                                                <field name="tvs_hyperechoic_solid" attrs="{'invisible': [('tvs_hyperechoic_solid', '!=', True)]}"/>
                                                                                <span for="tvs_hyperechoic_solid" attrs="{'invisible': [('tvs_hyperechoic_solid', '!=', True)]}" style=" margin-right: 1%; ">Hyperechoic/Solid</span>
                                                                                <field name="tvs_suspected_cavity_lesion" attrs="{'invisible': [('tvs_suspected_cavity_lesion', '!=', True)]}"/>
                                                                                <span for="tvs_suspected_cavity_lesion" attrs="{'invisible': [('tvs_suspected_cavity_lesion', '!=', True)]}" style=" margin-right: 1%; ">Suspected Cavity Lesion</span>
                                                                                <div class="d-flex">
                                                                                    <field name="tvs_menstruating" attrs="{'invisible': [('tvs_menstruating', '!=', True)]}"/>
                                                                                    <span for="tvs_menstruating" style=" margin-right: 1%; " attrs="{'invisible': [('tvs_menstruating', '!=', True)]}">Menstruating</span>
                                                                                </div>
                                                                                <field name="tvs_linining_ids"/>
                                                                            </div>
                                                                            <div t-if="record.tvs_lining_size_decimal.raw_value">
                                                                                <span class="o_form_label">CET</span>
                                                                            </div>
                                                                            <div t-if="record.tvs_lining_size_decimal.raw_value">
                                                                                <field name="tvs_lining_size_decimal"/>
                                                                                <span style=" margin-left: 1%; ">(mm)</span>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>


                                                                <div class="o_group row align-items-start">
                                                                    <div class="o_inner_group grid col-lg-12 text-900">
                                                                        <div class="d-flex d-sm-contents flex-column" t-if="record.tvs_rov.raw_value or record.tvs_right_ovary_not_visualised.raw_value">
                                                                            <div>
                                                                                <span class="o_form_label">ROV</span>
                                                                            </div>
                                                                            <div>
                                                                                <span t-if="record.tvs_rov.raw_value">
                                                                                    <field name="tvs_rov" style=" margin-right: 3%; "/>
                                                                                </span>
                                                                                <label attrs="{'invisible': [('tvs_right_ovary_not_visualised', '!=', True)]}" for="tvs_right_ovary_not_visualised">Not Visualised</label>
                                                                                <field attrs="{'invisible': [('tvs_right_ovary_not_visualised', '!=', True)]}" name="tvs_right_ovary_not_visualised"/>
                                                                            </div>
                                                                        </div>
                                                                        <div class="d-flex d-sm-contents flex-column" t-if="record.tvs_lov.raw_value or record.tvs_left_ovary_not_visualised.raw_value">
                                                                            <div>
                                                                                <span class="o_form_label">LOV</span>
                                                                            </div>
                                                                            <div>
                                                                                <span t-if="record.tvs_lov.raw_value">
                                                                                    <field name="tvs_lov" style=" margin-right: 3%; "/>
                                                                                </span>
                                                                                <label attrs="{'invisible': [('tvs_left_ovary_not_visualised', '!=', True)]}" for="tvs_left_ovary_not_visualised">Not Visualised</label>
                                                                                <field attrs="{'invisible': [('tvs_left_ovary_not_visualised', '!=', True)]}" name="tvs_left_ovary_not_visualised"/>
                                                                            </div>
                                                                        </div>
                                                                        <div class="d-flex d-sm-contents flex-column">
                                                                            <div>
                                                                                <span class="o_form_label">Cyst (cm)</span>
                                                                            </div>
                                                                            <div>
                                                                                <field name="repeat_cyst_computed"/>
                                                                            </div>
                                                                        </div>
                                                                        <!--                                                                    <div class="d-flex d-sm-contents flex-column">-->
                                                                        <!--                                                                        <t t-foreach="record.tvs_cyst_size_ids" t-as="o">-->
                                                                        <!--                                                                            <t t-out="o.type" />-->
                                                                        <!--                                                                        </t>-->
                                                                        <!--                                                                    </div>-->
                                                                        <div class="d-flex d-sm-contents flex-column"
                                                                             t-if="record.tvs_other_text.raw_value">
                                                                            <div>
                                                                                <span class="o_form_label">Other Findings
                                                                                </span>
                                                                            </div>
                                                                            <div>
                                                                                <field name="tvs_other_text" widget="html"/>
                                                                            </div>
                                                                        </div>
                                                                    </div>

                                                                </div>

                                                            </span>
                                                            <div class="o_group row align-items-start">
                                                                <div class="o_inner_group grid col-lg-12 text-900">
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('scan_required', '!=', 'yes')]}">
                                                                        <div>
                                                                            <span class="o_form_label"  style="font-weight:700;">
                                                                                Signs of Ovulation
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="tvs_signs_of_ovulation_ids"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         attrs="{'invisible': [('scan_required', '!=', 'yes')]}">
                                                                        <div>
                                                                            <span class="o_form_label" style="font-weight:700;">
                                                                                Diagnosis of Ultrasound
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="tv_diagnosis"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.counseling_and_discussion.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Counseling
                                                                                and Discussion done
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="counseling_and_discussion"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_diagnosis.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Diagnosis
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_diagnosis" widget="many2many_tags"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_investigations_ids.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">
                                                                                Investigations
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_investigations_ids"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_investigation_notes.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">
                                                                                Investigation Notes
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_investigation_notes"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_procedure_recommended_ids.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">
                                                                                Procedure Recommended
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_procedure_recommended_ids"/>
                                                                        </div>
                                                                    </div>
                                                                    <div class="d-flex d-sm-contents flex-column"
                                                                         t-if="record.repeat_treatment_plan.raw_value">
                                                                        <div>
                                                                            <span class="o_form_label">Treatment
                                                                                Plan
                                                                            </span>
                                                                        </div>
                                                                        <div>
                                                                            <field name="repeat_treatment_plan"/>
                                                                        </div>
                                                                    </div>
                                                                    <div>

                                                                        <button name="view_oi_ti_checklist"
                                                                                type="object"
                                                                                string="Edit"
                                                                                attrs="{'invisible': [('treatment_state', '=', 'none')]}"
                                                                                class="btn-primary repeat_kanban_button">
                                                                            OI/TI Treatment
                                                                        </button>

                                                                    </div>
                                                                    <!--                                                                    <div class="d-flex d-sm-contents flex-column"-->
                                                                    <!--                                                                         t-if="record.repeat_treatment_advised_ids.raw_value">-->
                                                                    <!--                                                                        <div>-->
                                                                    <!--                                                                            <span class="o_form_label">Treatment-->
                                                                    <!--                                                                                Pathway-->
                                                                    <!--                                                                            </span>-->
                                                                    <!--                                                                        </div>-->
                                                                    <!--                                                                        <div>-->
                                                                    <!--                                                                            <field name="repeat_treatment_advised_ids"/>-->
                                                                    <!--                                                                        </div>-->
                                                                    <!--                                                                    </div>-->
                                                                    <!--                                                                    <div class="d-flex d-sm-contents flex-column"-->
                                                                    <!--                                                                         t-if="record.repeat_new_treatment_pathway.raw_value">-->
                                                                    <!--                                                                        <div>-->
                                                                    <!--                                                                            <span class="o_form_label">Start new-->
                                                                    <!--                                                                                treatment pathway-->
                                                                    <!--                                                                            </span>-->
                                                                    <!--                                                                        </div>-->
                                                                    <!--                                                                        <div>-->
                                                                    <!--                                                                            <field name="repeat_new_treatment_pathway"/>-->
                                                                    <!--                                                                        </div>-->
                                                                    <!--                                                                    </div>-->
                                                                </div>
                                                            </div>

                                                        </span>


                                                        <!--                                                                <tr>-->
                                                        <!--                                                                    <td class="o_td_label">-->
                                                        <!--                                                                        <label for="lining_ids" class="o_form_label">Linining</label>-->
                                                        <!--                                                                    </td>-->
                                                        <!--                                                                    <td><field name="lining_ids" widget="many2many_checkboxes" class="oe_inline" nolabel="1"/></td>-->
                                                        <!--                                                                </tr>-->


                                                        <!--                                                                <tr t-if="record.tvs_rov.raw_value">-->
                                                        <!--                                                                    <td class="o_td_label">-->
                                                        <!--                                                                        <label for="tvs_rov" class="o_form_label">ROV</label>-->
                                                        <!--                                                                    </td>-->
                                                        <!--                                                                    <td><field name="tvs_rov"/></td>-->
                                                        <!--                                                                </tr>-->

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </t>

                    </templates>
                </kanban>
            </field>
        </record>

        <!-- Search View -->
        <record id="view_ec_repeat_consultation_search" model="ir.ui.view">
            <field name="name">ec.repeat.consultation.search.view</field>
            <field name="model">ec.repeat.consultation</field>
            <field name="arch" type="xml">
                <search string=">Repeat Consultation">
                    <field name="repeat_date"/>
                    <field name="repeat_patient_id" string="Patient"/>
                    <field name="repeat_consultation_state"/>
                </search>
            </field>
        </record>

        <!-- Explicit Tree view -->
        <record id="view_ec_repeat_consultation_in_progress_tree" model="ir.ui.view">
            <field name="name">ec.repeat.consultation.tree.view</field>
            <field name="model">ec.repeat.consultation</field>
            <field name="arch" type="xml">
                <tree create="false" edit="false" import="false" export_xlsx="false" delete="false">
                    <field name="repeat_date"/>
                    <field name="repeat_patient_id"/>
                    <field name="repeat_location_id"/>
                    <field name="repeat_seen_by"/>
                    <field name="repeat_consultation_state"/>
                    <button name="action_direct_delete_repeat_consultation_section"
                            type="object"
                            confirm="Are you sure you want to delete this repeat consultation? This action cannot be undone."
                            class="btn btn-primary m-2"
                            groups="ecare_medical_history.group_ec_medical_administrator"
                            string="Delete Consultation"/>
                    <button name="action_open_repeat_consultation_section"
                            type="object"
                            class="btn btn-primary m-2"
                            groups="ecare_medical_history.group_ec_medical_administrator"
                            string="Open Consultation"/>
                </tree>
            </field>
        </record>

        <!-- Explicit Tree view -->
        <record id="repeat_consultation_decision_pending_tree" model="ir.ui.view">
            <field name="name">ec.repeat.consultation.tree.view</field>
            <field name="model">ec.repeat.consultation</field>
            <field name="arch" type="xml">
                <tree create="false" edit="false" import="false" export_xlsx="false" delete="false">
                    <field name="repeat_date"/>
                    <field name="repeat_patient_id"/>
                    <field name="repeat_location_id"/>
                    <field name="repeat_seen_by"/>
                    <field name="treatment_state" string="Treatment State"/>
                    <button name="action_open_repeat_consultation_section"
                            type="object"
                            class="btn btn-primary m-2"
                            groups="ecare_medical_history.group_ec_medical_administrator"
                            string="Open Consultation"/>
                </tree>
            </field>
        </record>


        <!-- Explicit Action -->
        <record id="repeat_consultation_action" model="ir.actions.act_window">
            <field name="name">Repeat Consultation</field>
            <field name="res_model">ec.repeat.consultation</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('repeat_consultation_state', '!=', None)]</field>
            <field name="target">current</field>
        </record>

        <record id="repeat_consultation_action_decision_pending" model="ir.actions.act_window">
            <field name="name">Decision Pending</field>
            <field name="res_model">ec.repeat.consultation</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('treatment_state', '=', 'approval'),('repeat_consultation_state', '!=', None)]</field>
            <field name="view_id" ref="repeat_consultation_decision_pending_tree"/>
            <field name="target">current</field>
        </record>


        <menuitem id="ec_medical_history_delete_repeat_consultation"
                  name="Repeat Consultation"
                  groups="ecare_medical_history.group_ec_medical_administrator,ecare_medical_history.group_medical_history_delete_access_view"
                  parent="ec_medical_root"
                  action="repeat_consultation_action"
                  sequence="120"/>

        <menuitem id="ec_medical_history_decision_pending_ova"
                  name="Decision Pending"
                  groups="ecare_medical_history.group_ec_medical_administrator,ecare_medical_history.group_medical_history_delete_access_view"
                  parent="ec_medical_root"
                  action="repeat_consultation_action_decision_pending"
                  sequence="130"/>

    </data>
</odoo>
