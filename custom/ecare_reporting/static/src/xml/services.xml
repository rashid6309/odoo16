<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="EcareServicesReporting"> <!-- Being used in the js -->
        <div class="o_ecare_services_reporting">

        </div>
    </t>

    <t t-name="ReportingServicesCustom">
          <div class="p-3">
              <div class="container-fluid">
              <div class="row text-center">
                  <div class="col">
                           <h1>Services</h1>
                  </div>
              </div>
          </div>

              <t t-call="header_board"/>
              <div class="container-fluid">
                    <div class="row">
                        <div class="col-6 text-start">
                </div>
                        <t t-if="widget.header">
                            <div class="col-6 text-end">
                                <button id="print" class="btn btn-dark">Print Report</button>
                                <button id="print_excel" class="btn btn-dark">Print Report Excel</button>
                            </div>
                        </t>
                    </div>
                  <t t-if="widget.notification">
                      <div style="text-align:center">
                         <p style="color:#ff6666">Record does not exist.
                             <!-- <b t-out="widget.day_name"></b> -->
                         </p>
                     </div>
                  </t>
                  <t t-else="">
                      <div class="row p-3">
                      <div class="col-12">
                    <table class="table table-striped">
                      <thead>
                          <tr>
                               <t t-foreach="widget.header" t-as="header">
                                  <th style="text-transform: uppercase;font-weight: bold;" scope="col"><t t-out="header ? header : 'N.A' "/></th>
                                </t>
                          </tr>

                      </thead>
                        <!--                        <t t-if="widget.notification">-->
                        <tbody>
                            <t t-set="current_service_id" t-value="0"/>

                            <t t-set="total_number_counter" t-value="0"/>
                            <t t-set="total_number" t-value="0"/>
                            <t t-set="total_discount" t-value="0"/>
                            <t t-set="total_amount" t-value="0"/>

                            <t t-set="line_amount_index" t-value="7"/>
                            <t t-set="product_name_index" t-value="4"/>
                            <t t-set="product_index" t-value="9"/>

                            <t t-set="loop_start" t-value="1"/>

                            <t t-foreach="widget.data" t-as="data">
                                <t t-if="current_service_id != data[product_index]">
                                    <t t-set="current_service_id" t-value="data[product_index]"/>
                                    <t t-set="service_name" t-value="data[product_name_index]"/>
                                    <t t-if="loop_start == 0 ">
                                        <tr class="o_group_header" style=" font-size: 15px; color: #66598f; font-weight: bold; background: rgba(0, 0, 0, 0.03); ">
                                            <td><t t-esc="total_number_counter"/></td>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td/>
                                            <td><t t-esc="total_amount"/></td>
                                            <td><t t-esc="total_discount"/></td>
                                            <td/>
                                            <!--                                        <th colspan="11">-->
                                            <!--                                            <div class="card-header" id="headingOne">-->
                                            <!--                                              <h5 class="mb-0">-->
                                            <!--                                                <button class="btn btn-link">-->
                                            <!--                                                  <t t-esc="service_name"/>-->
                                            <!--                                                </button>-->
                                            <!--                                              </h5>-->
                                            <!--                                            </div>-->
                                            <!--                                            &lt;!&ndash;                                                <t t-esc="service_name"/>&ndash;&gt;-->
                                            <!--                                        </th>-->
                                        </tr>

                                        <t t-set="total_number_counter" t-value="0"/>
                                        <t t-set="total_amount" t-value="0"/>
                                        <t t-set="total_discount" t-value="0"/>
                                    </t>


                                    <tr class="o_group_header">
                                        <th colspan="11">
                                            <div class="card-header" id="headingOne">
                                              <h5 class="mb-0">
                                                <button class="btn btn-link">
                                                  <t t-esc="service_name"/>
                                                    <!--                                                  <t t-esc="data"/>-->
                                                </button>
                                              </h5>
                                            </div>
                                            <!--                                                <t t-esc="service_name"/>-->
                                        </th>
                                    </tr>

                                    <t t-set="loop_start" t-value="0"/>
                                </t>
                                <t t-if="data[line_amount_index] > 0">
                                    <t t-set="total_number_counter" t-value="total_number_counter + 1"/>
                                    <t t-set="total_amount" t-value="total_amount + data[7]"/>
                                    <t t-set="total_discount" t-value="total_discount + data[8]"/>
                                    <tr>
                                        <t t-set="i" t-value="0"/>
                                        <t t-foreach="data" t-as="record">
                                            <t t-if="i != product_index">
                                                <td style="white-space: pre-line;">
                                                    <t t-esc="record"/>
                                                </td>
                                            </t>
                                            <t t-set="i" t-value="i + 1"/>
                                        </t>
                                    </tr>
                                </t>
                                <t t-else="">
                                    <t t-set="total_number_counter" t-value="total_number_counter + 1"/>
                                    <t t-set="total_amount" t-value="total_amount + data[7]"/>
                                    <t t-set="total_discount" t-value="total_discount + data[8]"/>
                                    <tr>
                                        <t t-set="i" t-value="0"/>
                                        <t t-foreach="data" t-as="record">
                                            <t t-if="i != product_index">
                                                <td style="white-space: pre-line; color: red;">
                                                    <t t-esc="record"/>
                                                </td>
                                            </t>
                                            <t t-set="i" t-value="i + 1"/>
                                        </t>
                                    </tr>
                                </t>
                            </t>
                            <tr class="o_group_header" style=" font-size: 15px; color: #66598f; font-weight: bold; background: rgba(0, 0, 0, 0.03); ">
                                <td><t t-esc="total_number_counter"/></td>
                                <td/>
                                <td/>
                                <td/>
                                <td/>
                                <td/>
                                <td/>
                                <td><t t-esc="total_amount"/></td>
                                <td><t t-esc="total_discount"/></td>
                                <td/>
                                <!--                                        <th colspan="11">-->
                                <!--                                            <div class="card-header" id="headingOne">-->
                                <!--                                              <h5 class="mb-0">-->
                                <!--                                                <button class="btn btn-link">-->
                                <!--                                                  <t t-esc="service_name"/>-->
                                <!--                                                </button>-->
                                <!--                                              </h5>-->
                                <!--                                            </div>-->
                                <!--                                            &lt;!&ndash;                                                <t t-esc="service_name"/>&ndash;&gt;-->
                                <!--                                        </th>-->
                            </tr>
                        </tbody>

                        <!--                        </t>-->
                    </table>
                          <t t-set="i" t-value="1"/>
                          <nav aria-label="Page navigation example">
                          <ul class="pagination justify-content-center">
                            <li t-attf-class="page-item {{ (widget.active_page == 0) ? 'disabled':'' }}">
                              <a id="previous_page_btn" style="cursor: pointer;" class="page-link" tabindex="-1">Previous</a>
                            </li>
                              <t t-set="i" t-value="0"/>
                              <t t-foreach="widget.total_pages" t-as="">
                                    <li class="page-item">
                                     <a id="page" style="cursor: pointer;" t-att-pageNo="i"
                                        t-attf-class="page-link {{ (i == widget.active_page) ? 'activeButton' : ' ' }} "
                                        t-esc="i+1"></a>
                                    </li>
                                  <t t-set="i" t-value="i+1"/>
                                </t>
                              <li t-attf-class="page-item {{ (widget.active_page+1 == widget.total_pages) ? 'disabled':'' }}">
                              <a id="next_page_btn" style="cursor: pointer;" class="page-link" >Next</a>
                            </li>
                          </ul>
                        </nav>
                      </div>
                  </div>
                  </t>
              </div>
          </div>
     </t>






</templates>



